<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cassette Futurism UI - Control Panel Update</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* --- 全局变量 (默认黑夜模式) --- */
        :root {
            /* 基础背景 */
            --cf-bg-outer: #000000;       
            --cf-bg-wrapper: #121212;     
            --cf-bg-wrapper-pat: #1a1a1a; 
            --cf-bg-panel: #262626;       
            --cf-bg-screen: #080808;      
            
            /* 表格与列表 */
            --cf-bg-th: #1a1a1a;          
            --cf-bg-th-hover: #333333;    
            --cf-bg-td: #0a0a0a;          
            --cf-bg-td-hover: #161616;    
            --cf-bg-td-sticky: #111111;   
            
            /* 文字颜色 */
            --cf-text-main: #e6e6e6;
            --cf-text-dim: #777777;
            --cf-text-inv: #000000;       
            
            /* 强调色 (暗黄) */
            --cf-accent: #d4a017; 
            --cf-accent-dim: #8c6a0f;
            --cf-accent-glow: rgba(212, 160, 23, 0.2);
            
            /* 状态色 */
            --cf-success: #2ecc71;
            --cf-danger: #e74c3c;
            --cf-warn: #ffbb33;
            
            /* 边框与装饰 */
            --cf-border: #444444;
            --cf-scanline: rgba(255, 255, 255, 0.03); 
            --cf-vignette: rgba(0,0,0,0.25);          
            
            --cf-font-mono: 'Courier New', Courier, monospace;
        }

        /* --- 白天模式 (覆盖变量) --- */
        .light-mode {
            /* 基础背景 */
            --cf-bg-wrapper: #d1d5db;     
            --cf-bg-wrapper-pat: #c4c8ce; 
            --cf-bg-panel: #f5f5f5;       
            --cf-bg-screen: #ffffff;      
            
            /* 表格与列表 */
            --cf-bg-th: #e5e7eb;          
            --cf-bg-th-hover: #d1d5db;
            --cf-bg-td: #ffffff;
            --cf-bg-td-hover: #f3f4f6;
            --cf-bg-td-sticky: #f9fafb;
            
            /* 文字颜色 */
            --cf-text-main: #1f2937;      
            --cf-text-dim: #6b7280;       
            --cf-text-inv: #ffffff;       
            
            /* 强调色 (普鲁士蓝 #003153) */
            --cf-accent: #003153;
            --cf-accent-dim: #2c5270;
            --cf-accent-glow: rgba(0, 49, 83, 0.15);
            
            /* 状态色 */
            --cf-success: #059669;
            --cf-danger: #dc2626;
            --cf-warn: #d97706;
            
            /* 边框与装饰 */
            --cf-border: #9ca3af;         
            --cf-scanline: rgba(0, 0, 0, 0.02); 
            --cf-vignette: rgba(0,0,0,0.05);    
        }

        * { box-sizing: border-box; transition: background-color 0.3s, color 0.3s, border-color 0.3s; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--cf-bg-outer);
            color: var(--cf-text-main);
            font-family: var(--cf-font-mono);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- 16:9 视口容器 --- */
        .screen-wrapper {
            background-color: var(--cf-bg-wrapper);
            background-image: 
                linear-gradient(45deg, var(--cf-bg-wrapper-pat) 25%, transparent 25%, transparent 75%, var(--cf-bg-wrapper-pat) 75%, var(--cf-bg-wrapper-pat)),
                linear-gradient(45deg, var(--cf-bg-wrapper-pat) 25%, transparent 25%, transparent 75%, var(--cf-bg-wrapper-pat) 75%, var(--cf-bg-wrapper-pat));
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            aspect-ratio: 16 / 9;
            position: relative;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
            border: 1px solid #333;
        }

        @media (min-aspect-ratio: 16/9) { .screen-wrapper { height: 95vh; width: auto; } }
        @media (max-aspect-ratio: 16/9) { .screen-wrapper { width: 95vw; height: auto; } }

        .cassette-layout {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            padding: 20px;
        }

        /* --- 头部 --- */
        .header-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: var(--cf-bg-panel);
            border: 2px solid var(--cf-border);
            clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
            margin-bottom: 10px;
            flex-shrink: 0;
            height: 60px;
        }

        .brand-logo {
            font-size: 1.4rem;
            font-weight: 900;
            letter-spacing: 3px;
            color: var(--cf-accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brand-icon {
            width: 15px;
            height: 15px;
            background: var(--cf-accent);
            transform: rotate(45deg);
            box-shadow: 0 0 8px var(--cf-accent);
        }

        /* --- Tab 导航 --- */
        .nav-bar {
            display: flex;
            gap: 2px;
            margin-bottom: 0;
            padding-left: 10px;
            flex-shrink: 0;
            height: 35px;
        }

        .nav-tab {
            background: var(--cf-bg-th);
            border: 1px solid var(--cf-border);
            border-bottom: none;
            color: var(--cf-text-dim);
            padding: 0 25px;
            cursor: pointer;
            font-family: var(--cf-font-mono);
            text-transform: uppercase;
            position: relative;
            transition: all 0.2s;
            clip-path: polygon(10% 0, 90% 0, 100% 100%, 0% 100%);
            min-width: 120px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-tab.active {
            background: var(--cf-accent);
            color: var(--cf-text-inv);
            font-weight: bold;
            z-index: 10;
            border-color: var(--cf-accent);
        }

        /* --- 主屏幕 (CRT 容器) --- */
        .crt-frame {
            flex: 1;
            background-color: var(--cf-bg-screen);
            border: 4px solid var(--cf-border);
            border-radius: 4px;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: inset 0 0 30px var(--cf-vignette);
            overflow: hidden;
            min-height: 0;
        }

        /* CRT 扫描线效果 */
        .crt-frame::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: 
                linear-gradient(var(--cf-scanline) 50%, rgba(0, 0, 0, 0) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            z-index: 99;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* --- 上半部分：主视图 --- */
        .main-view {
            flex: 65;
            padding: 0;
            overflow: hidden;
            border-bottom: 1px solid var(--cf-border);
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
        }

        .table-scroll-container {
            flex: 1;
            overflow: auto;
            padding: 20px;
            position: relative;
        }

        .rhombus-table {
            border-collapse: separate;
            border-spacing: 0;
            min-width: 100%;
            width: max-content;
        }

        .rhombus-table th, .rhombus-table td {
            padding: 10px 15px;
            border-right: 1px solid var(--cf-border);
            border-bottom: 1px solid var(--cf-border);
            white-space: nowrap;
            font-size: 0.9rem;
        }

        .rhombus-table th {
            background: var(--cf-bg-th);
            color: var(--cf-accent);
            text-align: left;
            cursor: pointer;
            position: sticky;
            top: 0;
            z-index: 20;
            transition: background 0.2s;
            font-weight: bold;
        }

        .rhombus-table th:hover { background: var(--cf-bg-th-hover); }

        .rhombus-table td:first-child {
            position: sticky;
            left: 0;
            background: var(--cf-bg-td-sticky);
            z-index: 10;
            border-right: 2px solid var(--cf-border);
            color: var(--cf-text-main);
            font-weight: bold;
        }

        .rhombus-table th:first-child {
            position: sticky;
            top: 0;
            left: 0;
            z-index: 30;
            background: var(--cf-bg-th);
            border-right: 2px solid var(--cf-border);
        }

        .rhombus-table td { background: var(--cf-bg-td); color: var(--cf-text-dim); }

        .rhombus-table tr:hover td { background: var(--cf-bg-td-hover); color: var(--cf-text-main); }
        .rhombus-table tr:hover td:first-child { background: var(--cf-bg-td-hover); }

        .info-icon {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--cf-text-dim);
            transform: rotate(45deg);
            margin-left: 8px;
            vertical-align: middle;
            transition: background 0.2s;
        }
        .rhombus-table th:hover .info-icon { background: var(--cf-accent); }

        /* --- 中间分割线 --- */
        .split-divider {
            height: 10px;
            background: var(--cf-bg-td-sticky);
            border-top: 1px solid var(--cf-border);
            border-bottom: 1px solid var(--cf-border);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-shrink: 0;
            z-index: 2;
        }

        .diamond-dot { width: 4px; height: 4px; background: var(--cf-border); transform: rotate(45deg); }
        .diamond-dot.active { background: var(--cf-accent); }

        /* --- 底部区域容器 (包含日志和控制面板) --- */
        .bottom-section {
            flex: 35;
            display: flex;
            flex-direction: row;
            min-height: 0;
            position: relative;
            z-index: 1;
        }

        /* --- 日志视图 (60% 宽度) --- */
        .log-view {
            flex: 6; /* 60% */
            background: var(--cf-bg-screen);
            padding: 15px;
            overflow-y: auto;
            font-size: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 6px;
            border-right: 2px solid var(--cf-border);
        }

        .log-header-label {
            position: sticky;
            top: 0;
            background: var(--cf-bg-screen);
            border-bottom: 1px dashed var(--cf-border);
            color: var(--cf-text-dim);
            font-size: 0.7rem;
            padding-bottom: 5px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            z-index: 5;
        }

        .log-entry { display: flex; align-items: flex-start; gap: 10px; opacity: 0.9; }
        .log-bullet { width: 6px; height: 6px; background: var(--cf-border); transform: rotate(45deg); margin-top: 6px; flex-shrink: 0; }
        .log-bullet.error { background: var(--cf-danger); }
        .log-bullet.warn { background: var(--cf-warn); }
        .log-bullet.info { background: var(--cf-accent); }

        /* --- 控制面板 (40% 宽度) --- */
        .control-panel {
            flex: 4; /* 40% */
            background: var(--cf-bg-td-sticky); /* 稍微区别于屏幕背景 */
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
        }

        .panel-label {
            font-size: 0.7rem;
            color: var(--cf-text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .cmd-input-wrapper {
            display: flex;
            align-items: center;
            border: 1px solid var(--cf-border);
            background: var(--cf-bg-td);
            padding: 5px 10px;
        }

        .cmd-prompt { color: var(--cf-accent); margin-right: 8px; font-weight: bold; }

        .cmd-input {
            background: transparent;
            border: none;
            color: var(--cf-text-main);
            font-family: var(--cf-font-mono);
            width: 100%;
            outline: none;
            font-size: 0.9rem;
        }

        .control-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            flex: 1;
        }

        /* --- 弹窗样式 --- */
        .modal-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 200;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
        }
        .light-mode .modal-overlay { background: rgba(255,255,255,0.6); }

        .modal-diamond-box {
            width: 60%;
            max-width: 500px;
            background: var(--cf-bg-panel);
            border: 2px solid var(--cf-accent);
            padding: 30px;
            position: relative;
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
            box-shadow: 0 0 30px var(--cf-accent-glow);
            color: var(--cf-text-main);
        }

        .modal-diamond-box::after {
            content: '';
            position: absolute;
            top: 5px; right: 5px; width: 15px; height: 15px;
            background: var(--cf-accent);
            transform: rotate(45deg);
        }

        .modal-title {
            font-size: 1.2rem;
            color: var(--cf-text-main);
            margin-bottom: 20px;
            text-transform: uppercase;
            border-bottom: 1px solid var(--cf-border);
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .user-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .info-item label { display: block; color: var(--cf-text-dim); font-size: 0.7rem; margin-bottom: 5px; }
        .info-item .value { color: var(--cf-accent); font-size: 1.1rem; font-family: var(--cf-font-mono); font-weight: bold; }

        .bool-matrix { background: var(--cf-bg-td-sticky); padding: 15px; border: 1px solid var(--cf-border); }
        .bool-matrix-title { color: var(--cf-text-dim); font-size: 0.8rem; margin-bottom: 15px; text-align: center; }
        .bool-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .bool-item { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        
        .bool-indicator {
            width: 16px; height: 16px;
            transform: rotate(45deg);
            border: 2px solid var(--cf-border);
            transition: background 0.3s;
        }
        .bool-indicator.true { background: var(--cf-success); box-shadow: 0 0 8px var(--cf-success); border-color: var(--cf-success); }
        .bool-indicator.false { background: var(--cf-danger); box-shadow: 0 0 8px var(--cf-danger); border-color: var(--cf-danger); }
        .bool-label { font-size: 0.65rem; color: var(--cf-text-dim); }

        .rhombus-btn {
            background: var(--cf-bg-th);
            color: var(--cf-accent);
            border: 1px solid var(--cf-border);
            padding: 10px 20px;
            font-family: var(--cf-font-mono);
            text-transform: uppercase;
            font-weight: bold;
            cursor: pointer;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .rhombus-btn:hover { background: var(--cf-accent); color: var(--cf-text-inv); }
        
        .rhombus-btn.small {
            padding: 5px 15px;
            font-size: 0.8rem;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--cf-bg-screen); }
        ::-webkit-scrollbar-corner { background: var(--cf-bg-screen); }
        ::-webkit-scrollbar-thumb { background: var(--cf-border); border: 1px solid var(--cf-bg-screen); }
        ::-webkit-scrollbar-thumb:hover { background: var(--cf-accent); }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 数据配置 ---
        const COLUMNS = [
            { key: 'id', label: 'UNIT_ID', fixed: true },
            { 
                key: 'operator', label: 'OPERATOR', 
                userInfo: { 
                    userName: "Alex_R", userId: "OP-7721", 
                    perms: { "READ": true, "WRITE": true, "EXEC": false, "NET": true, "ADMIN": false, "ROOT": false } 
                } 
            },
            { 
                key: 'supervisor', label: 'SUPERVISOR', 
                userInfo: { 
                    userName: "Sarah_K", userId: "SV-9901", 
                    perms: { "READ": true, "WRITE": true, "EXEC": true, "NET": true, "ADMIN": true, "ROOT": false } 
                } 
            },
            { 
                key: 'tech_lead', label: 'TECH_LEAD', 
                userInfo: { 
                    userName: "Unit_404", userId: "AI-CORE", 
                    perms: { "READ": true, "WRITE": true, "EXEC": true, "NET": true, "ADMIN": true, "ROOT": true } 
                } 
            },
            { key: 'maintenance', label: 'MAINT_CREW', userInfo: null },
            { key: 'security', label: 'SEC_OFFICER', userInfo: null },
            { key: 'audit', label: 'AUDIT_LOG', userInfo: null },
            { key: 'backup', label: 'BACKUP_SYS', userInfo: null }
        ];

        const generateRows = (count) => {
            return Array.from({ length: count }, (_, i) => ({
                id: `SEC-${String(i + 1).padStart(3, '0')}`,
                operator: i % 2 === 0 ? 'Active' : 'Idle',
                supervisor: 'On_Duty',
                tech_lead: 'Monitoring',
                maintenance: i % 5 === 0 ? 'Scheduled' : 'None',
                security: 'Secure',
                audit: 'Logging...',
                backup: 'Synced'
            }));
        };

        const INITIAL_DATA = generateRows(30);

        // --- 组件：用户信息弹窗 ---
        const UserInfoModal = ({ isOpen, onClose, columnData }) => {
            if (!isOpen || !columnData) return null;
            const { userInfo, label } = columnData;
            const perms = userInfo || { userName: "N/A", userId: "N/A", perms: {} }; 

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-diamond-box" onClick={e => e.stopPropagation()}>
                        <div className="modal-title">
                            <span>// USER_PROFILE</span>
                            <span style={{color: 'var(--cf-accent)'}}>[{label}]</span>
                        </div>
                        {userInfo ? (
                            <>
                                <div className="user-info-grid">
                                    <div className="info-item">
                                        <label>USER_NAME</label>
                                        <div className="value">{userInfo.userName}</div>
                                    </div>
                                    <div className="info-item">
                                        <label>USER_ID</label>
                                        <div className="value">{userInfo.userId}</div>
                                    </div>
                                </div>
                                <div className="bool-matrix">
                                    <div className="bool-matrix-title">PERMISSION_MATRIX</div>
                                    <div className="bool-grid">
                                        {Object.entries(userInfo.perms).map(([key, value]) => (
                                            <div key={key} className="bool-item">
                                                <div className={`bool-indicator ${value ? 'true' : 'false'}`}></div>
                                                <span className="bool-label">{key}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div style={{padding: '20px', textAlign: 'center', color: 'var(--cf-text-dim)'}}>
                                NO_DATA_AVAILABLE
                            </div>
                        )}
                        <div style={{marginTop: '25px', textAlign: 'right'}}>
                            <button className="rhombus-btn" onClick={onClose}>CLOSE_VIEW</button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 组件：日志面板 ---
        const LogConsole = ({ logs }) => {
            const bottomRef = useRef(null);
            useEffect(() => { bottomRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [logs]);

            return (
                <div className="log-view">
                    <div className="log-header-label">
                        <span>SYSTEM_OUTPUT_STREAM</span>
                        <span>AUTO_SCROLL: ON</span>
                    </div>
                    {logs.map((log) => (
                        <div key={log.id} className="log-entry">
                            <div className={`log-bullet ${log.type}`}></div>
                            <div className="log-content">
                                <span style={{color: 'var(--cf-text-dim)'}}>[{log.time}]</span>{' '}
                                <span style={{
                                    color: log.type === 'error' ? 'var(--cf-danger)' : 
                                           log.type === 'warn' ? 'var(--cf-warn)' : 'var(--cf-text-main)'
                                }}>
                                    {log.message}
                                </span>
                            </div>
                        </div>
                    ))}
                    <div ref={bottomRef} />
                </div>
            );
        };

        // --- 组件：控制面板 (新增) ---
        const ControlPanel = ({ activeTab, onAction }) => {
            const [inputValue, setInputValue] = useState('');

            // 根据 Tab 定义不同的按钮
            const buttons = activeTab === 'status' 
                ? ['REFRESH_GRID', 'EXPORT_CSV', 'FILTER_ACTIVE', 'CLEAR_SELECTION']
                : ['SAVE_CONFIG', 'RESET_DEFAULTS', 'TEST_CONN', 'DEBUG_MODE'];

            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && inputValue.trim()) {
                    onAction('CMD_EXEC', inputValue);
                    setInputValue('');
                }
            };

            return (
                <div className="control-panel">
                    <div className="panel-label">COMMAND_INPUT</div>
                    <div className="cmd-input-wrapper">
                        <span className="cmd-prompt">&gt;</span>
                        <input 
                            type="text" 
                            className="cmd-input" 
                            placeholder="ENTER_CMD..." 
                            value={inputValue}
                            onChange={(e) => setInputValue(e.target.value)}
                            onKeyDown={handleKeyDown}
                        />
                    </div>

                    <div className="panel-label" style={{marginTop: '5px'}}>
                        QUICK_ACTIONS [{activeTab.toUpperCase()}]
                    </div>
                    <div className="control-grid">
                        {buttons.map(btn => (
                            <button 
                                key={btn} 
                                className="rhombus-btn small"
                                onClick={() => onAction(btn)}
                            >
                                {btn}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // --- 组件：数据表格 ---
        const DataTable = ({ data, onHeaderClick }) => {
            return (
                <div className="table-scroll-container">
                    <table className="rhombus-table">
                        <thead>
                            <tr>
                                {COLUMNS.map((col) => (
                                    <th 
                                        key={col.key}
                                        onClick={() => col.userInfo ? onHeaderClick(col) : null}
                                        style={{ cursor: col.userInfo ? 'pointer' : 'default' }}
                                    >
                                        {col.label}
                                        {col.userInfo && <span className="info-icon"></span>}
                                    </th>
                                ))}
                            </tr>
                        </thead>
                        <tbody>
                            {data.map(row => (
                                <tr key={row.id}>
                                    {COLUMNS.map(col => (
                                        <td key={`${row.id}-${col.key}`}>
                                            {row[col.key]}
                                        </td>
                                    ))}
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );
        };

        // --- 主应用 ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('status');
            const [data, setData] = useState(INITIAL_DATA);
            const [isDarkMode, setIsDarkMode] = useState(true);
            const [logs, setLogs] = useState([
                { id: 1, time: '10:00:00', type: 'info', message: 'System initialized.' },
                { id: 2, time: '10:00:05', type: 'info', message: 'Viewport locked to 16:9 aspect ratio.' },
            ]);
            const [modalState, setModalState] = useState({ isOpen: false, columnData: null });

            const addLog = (msg, type = 'info') => {
                const now = new Date().toLocaleTimeString('en-GB');
                setLogs(prev => [...prev, { id: Date.now(), time: now, type, message: msg }]);
            };

            const handleHeaderClick = (columnData) => {
                addLog(`Accessing profile for: ${columnData.label}`, 'info');
                setModalState({ isOpen: true, columnData });
            };

            const toggleTheme = () => {
                setIsDarkMode(!isDarkMode);
                addLog(`Theme switched to: ${!isDarkMode ? 'DARK_MODE' : 'LIGHT_MODE'}`, 'warn');
            };

            // 处理控制面板的动作
            const handleControlAction = (action, payload = '') => {
                if (action === 'CMD_EXEC') {
                    addLog(`Executing command: ${payload}`, 'info');
                    // 模拟命令处理延迟
                    setTimeout(() => {
                        addLog(`Command '${payload}' executed successfully.`, 'success');
                    }, 600);
                } else {
                    addLog(`Action triggered: ${action}`, 'warn');
                }
            };

            return (
                <div className={`screen-wrapper ${isDarkMode ? '' : 'light-mode'}`}>
                    <div className="cassette-layout">
                        {/* 顶部 */}
                        <header className="header-panel">
                            <div className="brand-logo">
                                <div className="brand-icon"></div>
                                DIAMOND_OS v4.5
                            </div>
                            <div style={{display: 'flex', alignItems: 'center', gap: '15px'}}>
                                <button className="rhombus-btn small" onClick={toggleTheme}>
                                    {isDarkMode ? '☼ DAY_MODE' : '☾ NIGHT_MODE'}
                                </button>
                                <div style={{fontSize: '0.8rem', color: 'var(--cf-text-dim)'}}>
                                    ASPECT: 16:9
                                </div>
                            </div>
                        </header>

                        {/* Tab 栏 */}
                        <div className="nav-bar">
                            <button className={`nav-tab ${activeTab === 'status' ? 'active' : ''}`} onClick={() => setActiveTab('status')}>
                                Grid_View
                            </button>
                            <button className={`nav-tab ${activeTab === 'config' ? 'active' : ''}`} onClick={() => setActiveTab('config')}>
                                Sys_Config
                            </button>
                        </div>

                        {/* CRT 主屏幕框 */}
                        <div className="crt-frame">
                            
                            {/* 上半部分：表格区域 */}
                            <div className="main-view">
                                {activeTab === 'status' && (
                                    <DataTable data={data} onHeaderClick={handleHeaderClick} />
                                )}
                                {activeTab === 'config' && (
                                    <div style={{padding: '40px', textAlign: 'center', color: 'var(--cf-text-dim)'}}>
                                        [ CONFIGURATION MODULE LOCKED ]
                                        <br/><br/>
                                        Please utilize command input below to unlock.
                                    </div>
                                )}
                            </div>

                            {/* 分割线 */}
                            <div className="split-divider">
                                <div className="diamond-dot"></div>
                                <div className="diamond-dot active"></div>
                                <div className="diamond-dot"></div>
                                <div className="diamond-dot active"></div>
                                <div className="diamond-dot"></div>
                            </div>

                            {/* 下半部分：日志 + 控制面板 */}
                            <div className="bottom-section">
                                {/* 左侧 60% 日志 */}
                                <LogConsole logs={logs} />
                                
                                {/* 右侧 40% 功能面板 */}
                                <ControlPanel activeTab={activeTab} onAction={handleControlAction} />
                            </div>

                        </div>

                        {/* 弹窗组件 */}
                        <UserInfoModal 
                            isOpen={modalState.isOpen} 
                            columnData={modalState.columnData}
                            onClose={() => setModalState({ ...modalState, isOpen: false })}
                        />
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>